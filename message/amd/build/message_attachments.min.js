/**
 * Controls the message popover in the nav bar.
 *
 * @module     core_message/message_attachments
 * @copyright  Moodle India <ryan@moodle.com>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("core_message/message_attachments",["jquery","core/str"],(function($,Str){return{init:function(){function readURL(input){if($('[data-region="confirm-dialogue-container"]').removeClass("hidden"),input.files&&input.files[0]){var type;console.log(input.files[0]);var filetype=input.files[0].type;return type=-1!==filetype.indexOf("image")?"image.png":-1!==filetype.indexOf("video")?"video.png":"document.png",Str.get_strings([{key:"confirmation",component:"core_message",param:null},{key:"title",component:"core_message",param:input.files[0].name},{key:"filetype",component:"core_message",param:input.files[0].type}]).then((function(strings){strings[2];var title=strings[1],heading=strings[0];$('[data-region="dialogue-text"]').html(heading);var reader=new FileReader;$('[data-region="title-text"]').html(title);var imgurl=$("#pictureurl").val();$("#attachmentpreview").attr("src",imgurl+type),$("#attachmentpreview").show(),reader.readAsDataURL(input.files[0])}))}}function attachmentpreview(){$('[data-region="confirm-dialogue-container"]').addClass("hidden"),$("#attachmentpreview").addClass("hidden")}document.getElementById("photosvideos").addEventListener("click",(function(){document.getElementById("msgattachments").click(),$("#errormsg").text("")})),document.getElementById("document").addEventListener("click",(function(){document.getElementById("msgdocuments").click(),$("#errormsg").text("")})),$("#msgattachments").change((function(){$("#mainmediadropdownmenu").removeClass("show"),$("#mediadropdownmenu").removeClass("show"),readURL(this)})),$("#msgdocuments").change((function(){$("#mainmediadropdownmenu").removeClass("show"),$("#mediadropdownmenu").removeClass("show"),readURL(this)})),$('[data-action="okay-confirm"]').click((function(){attachmentpreview(),$('[data-region="title-text"]').html(""),$('[data-region="type-text"]').html(""),$('[data-action="send-message"]').trigger("click"),$("#attachmentpreview").hide(),$("#attachmentpreview").attr("src","")})),$('[data-action="cancel-confirm"]').click((function(){attachmentpreview(),$("#msgattachments").val(""),$("#msgdocuments").val(""),$("#attachmentpreview").hide(),$("#attachmentpreview").attr("src","")})),$('[data-region="send-message-txt"]').keypress((function(){$("#errormsg").text("")}))}}}));

//# sourceMappingURL=message_attachments.min.js.map
